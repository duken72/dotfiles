if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    alias dir='dir --color=auto'
    alias vdir='vdir --color=auto'
    alias ldir='vdir'
    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

if type exa > /dev/null; then
    alias exa='exa --git --git-ignore'
    export EXA_COLORS="uu=1;31:da=1;35"
    alias ll='exa -l --icons'
    alias ldir='exa -lD --icons'
    alias lla='exa -la --icons'
    alias la='exa -a'
    alias ls='exa'
    alias l='exa'
    # alias tree='exa -l --tree --icons --git-ignore'
    alias tree1='exa -l --tree --icons --git-ignore --level=1'
    alias tree2='exa -l --tree --icons --git-ignore --level=2'
    function cd {
        builtin cd "$@" && exa
    }
else
    alias ll='ls -lh'
    alias ldir="ls -lhF --color | grep --color=never '^d'"
    alias lla='ls -Alh'
    alias la='ls -A'
    alias l='ls -C'
    function cd {
        builtin cd "$@" && ls -CA
    }
fi
alias grepr='grep -R'
alias ag='alias | grep'

# Overwrite existing commands for better defaults
alias rm='rm -i'
alias mv='mv -i'
alias mkdir='mkdir -p'
alias dirs='dirs -v'
alias cp='cp -r'
if type bat > /dev/null; then
    alias cat='bat'
else
    alias cat='cat -n'
fi
if type rsync > /dev/null; then
    alias rsync='rsync -rahp --info=progress2'
    #alias cp='rsync'
fi
alias df='df -h'
alias duh='du -ahd 1'
alias less='less -N -R --use-color -DC+y -Du+b -DP+g -DN+y -DE+r' # with line number
function cdfd {
    clear
    builtin cd $(fd -t d "$1" ~)
    la
}
alias ip='ip -color=auto'
alias dmesg='dmesg --color=always'
alias diff='diff --color=auto'
alias zip='zip -er9'
#if type glow > /dev/null; then
#    alias glow='glow -p'
#fi

# Navigation
alias   c='cl; cd'
alias  cL='cl; exa'
alias  ..='cd ..'
alias ...='cd ../..'
alias  .2='cd ../..'
alias  .3='cd ../../..'
alias  .4='cd ../../../..'
alias  .5='cd ../../../../..'

# CD GENERICS
alias dfs='clear && cd ~/dotfiles'
alias cf='clear && cd ~/dotfiles/config'
alias cfg='clear && cd ~/.config'
alias pkg='clear && cd ~/dotfiles/pkg'
alias docs='clear && cd ~/Documents'
alias books='clear && cd ~/Documents/books'
alias pd='clear && cd ~/Documents/personal-docs'
alias down='clear && cd ~/Downloads'
alias music='clear && cd ~/Music'
alias pics='clear && cd ~/Pictures'
alias img='clear && cd ~/Pictures'
alias vid='clear && cd ~/Videos'
alias ws='clear && cd ~/WS'
alias td='clear && cd ~/WS/TODO'
alias phd='clear && cd ~/WS/phd-rbo'
alias test='clear && cd ~/WS/test'

# CD WORKSPACES
# alias something='clear && cd $HOME/something'
alias cfd='clear && cd ~/WS/codingForDummies && git status'
alias cv='clear && cd ~/WS/Curriculum-Vitae-Latex'
alias notes='clear && cd ~/WS/learningNotes'
alias nov='clear && cd ~/WS/learningNotes && v'
alias nol='clear && cd ~/WS/notesLatex'
alias nn='cdfd neural-network-test'
alias nnv='nn && v'
alias ccom='clear && cd ~/WS/coding-competitions && v'
alias aoc='clear && cd ~/WS/Advent-of-Code/AoC-2022'
alias cs='clear && cd ~/WS/codingForDummies/cppFD/CS'
alias gl='clear && cd ~/WS/parrobots && act'
alias grl='clear && cd ~/WS/test/goalRL-test'

# System
alias mem='ncdu --show-graph --show-percent --group-directories-first --show-itemcount'
alias hist='history'
alias cl='clear' #for terminator, just Ctrl+L
alias rb='reboot'
alias sdn='shutdown now'

# .alias, .rc and .config
alias ealias='v ~/.aliases'
alias talias='. ~/.aliases'
alias ebashrc='v ~/.bashrc'
alias tbashrc='. ~/.bashrc'
alias ezshrc='v ~/.zshrc'
alias tzshrc='. ~/.zshrc'
alias polybar='polybar --reload duck-mainbar'

# Applications specific
alias py='python3'
alias ipy='ipython3'
alias v='nvim'
alias co='code'
alias coh='code . && exit'
alias sv='sudo -E nvim'
alias run='./run.sh'
alias jn='jupyter-notebook'
alias o='xdg-open'
alias of='o .'
function opdf {
    xdg-open "$@" && exit
}
alias ra='ranger'
alias pdfConvert='soffice --headless --convert-to pdf' # convert a file to pdf, at least work with pptx
alias tlmgr='/usr/share/texmf-dist/scripts/texlive/tlmgr.pl --usermode'

alias rwifi='nmcli radio wifi off && nmcli radio wifi on'
alias speedtest='curl -s https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py | python -'
alias weather='curl wttr.in Berlin'
alias clock='tty-clock -sc -C 1 -f %A,%d-%b-%Y'
function diet {
    cd ~/Documents && clear
    gawk -v dow=$(date +%A) '$2 == dow {$1=$7=""; print}' diet2.md 
    # cat diet.md
}
alias usound='amixer -q -D pulse sset Master 14%+'
alias dsound='amixer -q -D pulse sset Master 14%-'

# Workspaces
alias ros2ws='cdfd ros2ws && cd src'
# alias wsco='cd ws && ws-activate && v'

# OS specific
ID=$(grep -v _ID /etc/os-release | grep ID=)

# OSD
if grep -q "osd" <<< $ID; then
    alias vc='osd-vpn-connect'
fi

# Ubuntu
if grep -q "ubuntu" <<< $ID; then
    alias upd='sudo apt-get update'
    alias upg='sudo apt dist-upgrade'
    alias sup='upd && time upg'
    alias fd='fdfind'
    alias agi='apt-get install'
fi
# dist-upgrade will install & remove packages as necessary
# to complete upgrade, resolve dependencies

# Arch Linux
if grep -q "arch" <<< $ID; then
    if type fzf > /dev/null; then
        alias pacs="pacman -Slq | fzf --multi --preview 'pacman -Si {1}' | xargs -ro sudo pacman -S"
        alias pacu="sudo pacman -Sy && pacman -Qqu | fzf --multi --preview 'pacman -Si {1}' | xargs -ro sudo pacman -S"
        alias pacr="pacman -Qq | fzf --multi --preview 'pacman -Qi {1}' | xargs -ro sudo pacman -Rns"
    else
        alias pacs='sudo pacman -S'
        alias pacss='pacman -Ss'
        alias pacr='sudo pacman -R'
    fi
    alias pacsyu='sudo pacman -Syu'
    alias sup='pacsyu; auraau'
    alias pacq='pacman -Q'
    alias pacg='pacman -Sg'
    alias auraa='sudo aura -Akax'
    alias aurar='sudo aura -R'
    alias auraas='aura -As'
    alias auraau='sudo aura -Au'
    alias orphans='pacman -Qtdq | sudo pacman -Rns -'
    alias orphans2='pacman -Qqd | sudo pacman -Rsu -'
    alias cache_show='find ~/.cache/ -type f -atime +72'
    alias cache_clean='find ~/.cache/ -type f -atime +72 -delete'
fi

alias vnkey='echo "Switch with Alt+Shift+K" && ibus-daemon'

# MOUNT USB
alias usbg='echo "usbmount /dev/drive_name, drive_name from lsblk"'
alias usbmount='udisksctl mount -b' # /dev/drive_name, drive_name from lsblk
alias usbunmount='udisksctl unmount -b' # /dev/drive_name, drive_name from lsblk

# MOUNT TUB
alias tubm='nasd && nasp && ws'
alias tubum='sudo umount ~/WS/nasd && ~/WS/nasp'
alias nas='sudo mount -t nfs -o rw,noatime,nodiratime,async storage.robotics.tu-berlin.de:/volume1/data ~/WS/nas && cd ~/WS/nas'
alias nasd='sudo mount -t nfs -o rw,noatime,nodiratime,async storage.robotics.tu-berlin.de:/volume1/data/duc ~/WS/nasd && cd ~/WS/nasd'
alias nasp='sudo mount -t nfs -o rw,noatime,nodiratime,async storage.robotics.tu-berlin.de:/volume1/data/parrobots ~/WS/nasp && cd ~/WS/nasp'
alias afs='sshfs duken72@sshgate.tu-berlin.de:/afs/tu-berlin.de/units/Fak_IV/robotics/RBO ~/WS/afs && cd ~/WS/afs'
alias afsd='sshfs duken72@sshgate.tu-berlin.de:/afs/tu-berlin.de/units/Fak_IV/robotics/Staff/Duc ~/WS/afsd && cd ~/WS/afsd'

# DUAL BOOT with WINDOWS
WIN=/media/${USERNAME}
WINPATH=${WIN}/Windows/Users
alias mountwin='umountw; sudo mkdir ${WIN}/Windows && sudo mount.ntfs-3g /dev/nvme0n1p3 ${WIN}/Windows/'
alias umountw='cd ${WIN} && sudo umount Windows ;sudo rmdir ${WIN}/Windows && cd' 

# Git
alias g='git'
function gap {    # git add, commit with message, push
    git add .; git commit -m "$1"; git push origin
}
function gaps {   # git add, commit with message and sign, push
    git add .; git commit -S -m "$1"; git push origin
}
alias gi='git init'
alias gcl='git clone'
alias gst='git status'
alias ga='git add'
alias gaa='git add .'
alias grst='git restore'
alias grs='git reset'
alias gci='git commit -m'
alias gcis='git commit -S -m'
alias gac='git commit -am'
alias gacs='git commit -S -am'
alias gft='git fetch'
alias gps='git push origin'
alias gpl='git pull origin'
alias gbr='git branch'
alias gba='git branch -a'
alias gdf='git diff'

# Docker
alias dp='docker pull'
alias dt='docker tag'
alias di='docker images'
alias drmi='docker rmi'
alias dcon='docker ps'
alias dca='docker ps -a'
alias drm='docker rm'
alias dros='docker run -it --rm --env="DISPLAY" --env="QT_X11_NO_MITSHM=1" --volume="/tmp/.X11-unix:/tmp/.X11-unix:rw" osrf/ros:humble-desktop'

# Sync dotfiles
alias dst='dfs && git status'
alias dpl='dfs && git pull origin'
function dps {    # dotfiles push
    cd ~/dotfiles
    gaps "$1"
}

# Guide For Dummies
alias bashg='bat $(fd bashFD.bash ~)'
alias bashgg='rg $(fd bashFD.bash ~) -e'
alias gitg='bat $(fd gitFD.bash ~)'
alias gitgg='rg $(fd gitFD.bash ~) -e'
alias vimg='bat $(fd vimFD.bash ~)'
alias vimgg='rg $(fd vimFD.bash ~) -e'
alias lessg='bat $(fd lessFD.bash ~)'
alias rosg='bat $(fd rosFD.bash ~)'
alias rosgg='rg $(fd rosFD.bash ~) -e'
alias ros2g='bat $(fd ros2FD.bash ~)'
alias ros2gg='rg $(fd ros2FD.bash ~) -e'
alias pyg='bat $(fd pyFD.py ~)'
alias pygg='rg $(fd pyFD.py ~) -e'
alias dockerg='bat $(fd dockerFD.bash ~)'
alias dockergg='rg $(fd dockerFD.bash ~) -e'

# Python venv
alias act='source bin/activate'
alias deact='deactivate'

alias gtd='o ~/git/learningNotes/notes/images/workflow-diagram-gtd.png'
alias ssh-ubuntu='ssh -p 2222 duken72@localhost'

# Steam
function steamid {
	find ~/.local/share/Steam/steamapps/ -maxdepth 1 -type f -name '*.acf' -exec awk -F '"' '/"appid|name/{ printf $4 "|" } END { print "" }' {} \; | column -t -s '|' | sort -k 2 | grep -i "$1"
}
